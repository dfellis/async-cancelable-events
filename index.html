<!DOCTYPE html>  <html> <head>   <title>async-cancelable-events.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               async-cancelable-events.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">isAsync</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;is-async&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>printMaxListenersWarning</h2>

<p>is a listener that prints a warning when the max listeners has been exceeded just
like the <code>EventEmitter</code> does, but now you can clear it out by executing
<code>this.removeAllListeners('maxListenersPassed')</code> in your constructor function
just after running the <code>AsyncCancelableEvents</code> constructor function in your own
constructor function.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">printMaxListenersWarning</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listenerCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;The Event &#39;</span> <span class="o">+</span> <span class="nx">eventName</span> <span class="o">+</span> <span class="s1">&#39; has exceeded &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxListeners</span> <span class="o">+</span> <span class="s1">&#39; listeners, currently at &#39;</span> <span class="o">+</span> <span class="nx">listenerCount</span><span class="p">);</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>AsyncCancelableEvents</h1>

<p>constructor function, a drop-in replacement for <code>EventEmitter</code> almost every time
(excepting when an event emits a function, then use <code>emitSync</code>) that also allows
the event listeners to cancel events if <code>emit</code> is provided with a callback.
Event listeners may be either synchronous like DOM events or asynchronous to better
fit the Node.js style. (Because of that, making an event placed inside of a high
performance loop is probably a bad idea because the event listeners can introduce
an unpredictable delay.) The <code>AsyncCancelableEvents</code> constructor function attaches
three "please don't touch" properties to itself (or its inheriting object) to keep
track of listeners and the maximum number of allowed listeners.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">AsyncCancelableEvents</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_maxListeners</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;maxListenersPassed&#39;</span><span class="p">,</span> <span class="nx">printMaxListenersWarning</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>emit</h2>

<p>takes and event name and a variable number of arguments. If the last argument is a
function, it assumes it's a callback for the event and that this event is cancelable.
Listeners can only cancel events if their return value (or callback parameter) is
<code>false</code>, any other value is considered <code>true</code> and the event continues. Event
cancelation immediately ends all processing of event listeners. The order of event
listeners is roughly that of the order they were attached, but <code>once</code> listeners
are given priority over <code>on</code> listeners (so its possible to do a one-time
cancelation and not have any of the <code>on</code> listeners called).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emit</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Get the list of arguments for the listeners into an array</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">argsArray</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>If the last argument is a function, assume its a callback for <code>emit</code> and pop it off</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">argsArray</span><span class="p">[</span><span class="nx">argsArray</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Function</span> <span class="o">?</span> <span class="nx">argsArray</span><span class="p">[</span><span class="nx">argsArray</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">argsArray</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Create an array of listeners to call for this particular event, taking the <code>once</code>
listeners first and firing the removeListener event, then attaching any <code>on</code>
listeners. In both cases only if they exist.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">listenersToCall</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listenersToCall</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">listenersToCall</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]);</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>An asynchronous iterator for the listeners. If the return value given to it is <code>false</code>,
immediately end and call the callback, if it exists, otherwise if there are still listeners
to call, call them (determining whether or not the listener is asynchronous) and pass the
result into the iterator function (either by callback or simply calling itself recursively
if synchronous). If there are no more listeners to call and none of them returned <code>false</code>,
finally return <code>true</code> to the callback function, if it exists.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">iterate</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">iterate</span><span class="p">(</span><span class="nx">retVal</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">retVal</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">isAsync</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">listener</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">);</span>
                    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">iterate</span><span class="p">);</span>
                    <span class="nx">iterate</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">iterate</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Call the iterate function with <code>true</code> to kick off the recursive process</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">iterate</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Whenever possible, have the methods return <code>this</code> so they can be chained</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>emitAsync</h2>

<p>In this case, forcing async means the same thing as the normal version of the function</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitAsync</span> <span class="o">=</span> <span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emit</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>emitSync</h2>

<p>Unfortunately for synchronous emit, the logic is changed enough that simply wrapping
<code>sync</code> (as done below with other methods) is not possible, but the overall pattern
of getting the arguments, the listeners to call, and iterating through them is still
the same. In this case, however, the last argument is always passed to the listeners
and what the listeners return is only checked for canceling the listeners calling list,
the result is never returned.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emitSync</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">emitSync</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">argsArray</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">listenersToCall</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listenersToCall</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">listenersToCall</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]);</span>
    <span class="kd">var</span> <span class="nx">iterate</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">iterate</span><span class="p">(</span><span class="nx">retVal</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">retVal</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="nx">listenersToCall</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">isAsync</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">listener</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">argsArray</span><span class="p">);</span>
                    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">iterate</span><span class="p">);</span>
                    <span class="nx">iterate</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">argsArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">iterate</span><span class="p">);</span>
    <span class="nx">iterate</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>on</h2>

<p>The bread-n-butter of an EventEmitter, registering listeners for events. In this
implementation, the event types are lazily determined, as this is the most
obvious implementation for Javascript, and high performance for registering
listeners shouldn't be an issue. If the total number of listeners exceeds the
maximum specified, the <code>maxListenersPassed</code> event is fired with the event name
and listener count as arguments provided to the listener. Like all events internal
to <code>AsyncCancelableEvents</code>, it is not cancelable, itself. Once registered, the
<code>newListener</code> event is emitted.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">on</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">listenerCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">listenerCount</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxListeners</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;maxListenersPassed&#39;</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">listenerCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;newListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <h2>onSync</h2>

<p>Taking advantage of the <code>is-async</code> method's behavior, registering a forced
synchronous event simply requires attaching a truthy <code>sync</code> property to the
method and then registering it as usual.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onSync</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onSync</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h2>onAsync</h2>

<p>Similarly for forced asynchronous functions, just attach a truthy <code>async</code> property</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onAsync</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onAsync</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <h2>addListener, addListenerSync, addListenerAsync</h2>

<p>These methods are just synonyms for the <code>on*</code> methods, kept just to make sure
<code>AsyncCancelableEvents</code> should "just work" for the majority of use-cases of
<code>EventEmitter</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addListener</span> <span class="o">=</span> <span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span>
<span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addListenerSync</span> <span class="o">=</span> <span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onSync</span><span class="p">;</span>
<span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addListenerAsync</span> <span class="o">=</span> <span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onAsync</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <h2>once</h2>

<p>The <code>once</code> method works very similar to the <code>on</code> method, except it operates on the
<code>_oneTimeListeners</code> property, instead. This could probably be DRYed out a bit, but
will only save a few lines of code and I don't expect this library to change much.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">once</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">once</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">listenerCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">listenerCount</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxListeners</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;maxListenersPassed&#39;</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">listenerCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;newListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h2>onceSync</h2>

<p>Exactly like <code>onSync</code>, but with a different method involved. Attempting to DRY
this would produce a net <em>gain</em> in lines of code.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onceSync</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onceSync</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <h2>onceAsync</h2>

<p>Exactly like <code>onAsync</code> but for <code>once</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onceAsync</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onceAsync</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <h2>removeListener</h2>

<p>Checks if the event has any listeners registered and then filters out the provided listener,
firing the <code>removeListener</code> event if found. It must be a reference to the same function,
not just have equal <code>toString</code> results.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">removeListener</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registeredListener</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">registeredListener</span> <span class="o">===</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registeredListener</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">registeredListener</span> <span class="o">===</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <h2>removeAllListeners</h2>

<p>If an event name is provided, it removes all of the listeners for that event (if the event
exists) and emits the <code>removeListener</code> event for each listener. If not called with an
event name, it generates a list of events and recursively calls itself for each event.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeAllListeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">removeAllListeners</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
            <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
            <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">emitSync</span><span class="p">(</span><span class="s1">&#39;removeListener&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
            <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
            <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">removeAllListeners</span><span class="p">(</span><span class="nx">eventName</span><span class="p">);</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">removeAllListeners</span><span class="p">(</span><span class="nx">eventName</span><span class="p">);</span>
        <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h2>setMaxListeners</h2>

<p>'Nuff said.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setMaxListeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">setMaxListeners</span><span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_maxListeners</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h2>listeners</h2>

<p>Returns an array of registered listeners for the given event. This array is a copy
so you can alter it at will, but the functions it points to are not copies, so
properties attached to them will propagate back into <code>AsyncCancelableEvents</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">listeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">listeners</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">registeredListeners</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">registeredListeners</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]);</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">registeredListeners</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">registeredListeners</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <h2>listenerCount</h2>

<p>Not sure why <code>EventEmitter</code> didn't make this a prototype method, but here you go.
Given an <code>AsyncCancelableEvents</code> instance and an event name, it returns the number
of listeners registered on that event.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">AsyncCancelableEvents</span><span class="p">.</span><span class="nx">listenerCount</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">listenerCount</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nx">count</span> <span class="o">+=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_eventListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nx">count</span> <span class="o">+=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">_oneTimeListeners</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">count</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Export <code>AsyncCancelableEvents</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">AsyncCancelableEvents</span><span class="p">;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 